(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{206:function(e,n,t){"use strict";t.r(n);var a=t(0),s=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"components-list"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#components-list"}},[e._v("#")]),e._v(" Components list")]),e._v(" "),t("p",[e._v("Voici une liste des composants principaux:")]),e._v(" "),t("ul",[t("li",[e._v("component-base: c'est le composant minimum dans une plateforme")]),e._v(" "),t("li",[e._v("component-network: permet de créer le networking")]),e._v(" "),t("li",[e._v("component-kubernetes: contient le cluster k8s, sa gestion du réseau et les éléments indispensables")]),e._v(" "),t("li",[e._v("component-observability-infra: permet d'observer l'infra")]),e._v(" "),t("li",[e._v("component-observability-apps: permet d'observer les apps")]),e._v(" "),t("li",[e._v("component-serverless-enable: active les élements permettant de profiter du serverless")]),e._v(" "),t("li",[e._v("component-grafana-eks: pour installer un grafana dans eks")]),e._v(" "),t("li",[e._v("component-batch: pour lancer un container")])]),e._v(" "),t("h2",{attrs:{id:"components-definition"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#components-definition"}},[e._v("#")]),e._v(" Components definition")]),e._v(" "),t("h3",{attrs:{id:"component-base"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-base"}},[e._v("#")]),e._v(" component-base")]),e._v(" "),t("p",[e._v("Ce composent est necessaire pour créer une plateforme")]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-base"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-base"}},[e._v("#")]),e._v(" ownership for component-base")]),e._v(" "),t("ul",[t("li",[e._v("team solution")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-base"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-base"}},[e._v("#")]),e._v(" elements for component-base")]),e._v(" "),t("ul",[t("li",[e._v('public route53 SOA "$plateform.accor.net" (to be defined)')]),e._v(" "),t("li",[e._v("activate CWL for api gateway")]),e._v(" "),t("li",[e._v('aws cognito pour la gestion des utilisateurs "admin" (sauf si ping identity)\n'),t("ul",[t("li",[e._v("la liste des utilisateurs est fournis au component via le manifest")])])]),e._v(" "),t("li",[e._v("initie le chatops")])]),e._v(" "),t("h3",{attrs:{id:"component-network"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-network"}},[e._v("#")]),e._v(" component-network")]),e._v(" "),t("p",[e._v("Permet de créer l'ensemble des éléments du réseau")]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-network"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-network"}},[e._v("#")]),e._v(" ownership for component-network")]),e._v(" "),t("ul",[t("li",[e._v("team réseau")]),e._v(" "),t("li",[e._v("temps ops")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-network"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-network"}},[e._v("#")]),e._v(" elements for component-network")]),e._v(" "),t("ul",[t("li",[e._v("VPC")]),e._v(" "),t("li",[e._v("subnet")]),e._v(" "),t("li",[e._v("subnet group")]),e._v(" "),t("li",[e._v("routes table")]),e._v(" "),t("li",[e._v("nat gateway")]),e._v(" "),t("li",[e._v("egress only internet gateway")]),e._v(" "),t("li",[e._v("route53 private zone")])]),e._v(" "),t("h3",{attrs:{id:"component-kubernetes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-kubernetes"}},[e._v("#")]),e._v(" component-kubernetes")]),e._v(" "),t("p",[e._v("Permet d'avoir un kubernetes utilisable")]),e._v(" "),t("h4",{attrs:{id:"dependance-de-component-kubernetes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependance-de-component-kubernetes"}},[e._v("#")]),e._v(" Dépendance de component-kubernetes")]),e._v(" "),t("p",[e._v("est dépendant de component-network")]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-kubernetes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-kubernetes"}},[e._v("#")]),e._v(" ownership for component-kubernetes")]),e._v(" "),t("ul",[t("li",[e._v("team solution")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-kubernetes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-kubernetes"}},[e._v("#")]),e._v(" elements for component-kubernetes")]),e._v(" "),t("ul",[t("li",[e._v("EKS avec\n"),t("ul",[t("li",[e._v("les masters managés")]),e._v(" "),t("li",[e._v("un node pool de compute")]),e._v(" "),t("li",[e._v("un node pool de ...")]),e._v(" "),t("li",[e._v("installation / confirguration de Calico (ou cilium)")])])]),e._v(" "),t("li",[e._v('deux ingress controllers "traefik"\n'),t("ul",[t("li",[e._v("un pour les flux public")]),e._v(" "),t("li",[e._v("un pour les flux d'aministration")])])]),e._v(" "),t("li",[e._v("un backend de stockage Rook (ceph) sur un NodePool de i3 (stockage des PVC en multi-az)")]),e._v(" "),t("li",[e._v("cluster-autoscaler")]),e._v(" "),t("li",[e._v("externalDNS")]),e._v(" "),t("li",[e._v("kube2iam ou kiam ou service EKS")])]),e._v(" "),t("h3",{attrs:{id:"component-observability-infra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-observability-infra"}},[e._v("#")]),e._v(" component-observability-infra")]),e._v(" "),t("p",[e._v("Créer les éléments d'observabilité de l'infratructure")]),e._v(" "),t("h4",{attrs:{id:"dependance-de-component-observability-infra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependance-de-component-observability-infra"}},[e._v("#")]),e._v(" Dépendance de component-observability-infra")]),e._v(" "),t("p",[e._v("est dépendant de component-network")]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-observability-infra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-observability-infra"}},[e._v("#")]),e._v(" ownership for component-observability-infra")]),e._v(" "),t("ul",[t("li",[e._v("team solution")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-observability-infra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-observability-infra"}},[e._v("#")]),e._v(" elements for component-observability-infra")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("ES managé")])]),e._v(" "),t("li",[t("p",[e._v("monitoring")]),e._v(" "),t("ul",[t("li",[e._v("un node exporter par EC2 (inclus node EKS)")]),e._v(" "),t("li",[e._v("cloudwatch-exporter pour les services managés")]),e._v(" "),t("li",[e._v("pushGateway pour les métriques lambdas métiers")]),e._v(" "),t("li",[e._v("un prometheus (dans un ASG)\n"),t("ul",[t("li",[e._v("découverte via ec2_sd_config (https://prometheus.io/docs/prometheus/latest/configuration/configuration/#ec2_sd_config)")])])])])]),e._v(" "),t("li",[t("p",[e._v("alerting")]),e._v(" "),t("ul",[t("li",[e._v("AlertManager (dans un ASG)")])])]),e._v(" "),t("li",[t("p",[e._v("logging")]),e._v(" "),t("ul",[t("li",[e._v("fluentd par EC2 (pour les node EKS uniquement les logs EC2)\n"),t("ul",[t("li",[e._v("=> dans bucket s3")]),e._v(" "),t("li",[e._v("=> dans l'ES managé")])])])])]),e._v(" "),t("li",[t("p",[e._v("tracing")]),e._v(" "),t("ul",[t("li",[e._v("vers ES managé")]),e._v(" "),t("li",[e._v("jaeger-operator dans EKS")])])]),e._v(" "),t("li",[t("p",[e._v("Grafana sur EC2, branché par défaut sur")]),e._v(" "),t("ul",[t("li",[e._v("le prometheus sur EC2")])])])]),e._v(" "),t("h3",{attrs:{id:"component-observability-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-observability-apps"}},[e._v("#")]),e._v(" component-observability-apps")]),e._v(" "),t("p",[e._v("Map les métriques applicatives")]),e._v(" "),t("h4",{attrs:{id:"dependance-de-component-observability-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependance-de-component-observability-apps"}},[e._v("#")]),e._v(" Dépendance de component-observability-apps")]),e._v(" "),t("p",[e._v('est dépendant de "component-observability-infra"')]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-observability-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-observability-apps"}},[e._v("#")]),e._v(" ownership for component-observability-apps")]),e._v(" "),t("ul",[t("li",[e._v("team solution")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-observability-apps"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-observability-apps"}},[e._v("#")]),e._v(" elements for component-observability-apps")]),e._v(" "),t("ul",[t("li",[e._v("monitoring\n"),t("ul",[t("li",[e._v("dans EKS\n"),t("ul",[t("li",[e._v("prometheus-operator\n"),t("ul",[t("li",[e._v("un prometheus par namespace")])])])])]),e._v(" "),t("li",[e._v("dans Lambda")]),e._v(" "),t("li",[e._v("dans EC2")])])]),e._v(" "),t("li",[e._v("alerting\n"),t("ul",[t("li",[e._v("utiliser l'AlertManager sur vm ec2")])])]),e._v(" "),t("li",[e._v("logging\n"),t("ul",[t("li",[e._v("fluentd pour les logs apps\n"),t("ul",[t("li",[e._v("=> dans bucket s3")]),e._v(" "),t("li",[e._v("=> dans l'ES managé")])])])])]),e._v(" "),t("li",[e._v("tracing\n"),t("ul",[t("li",[e._v("vers ES managé")]),e._v(" "),t("li",[e._v("dans EKS\n"),t("ul",[t("li",[e._v("jaeger-operator dans EKS")])])])])])]),e._v(" "),t("h3",{attrs:{id:"component-serverless-enable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-serverless-enable"}},[e._v("#")]),e._v(" component-serverless-enable")]),e._v(" "),t("p",[e._v("Gère les dépendances des applictions lambda")]),e._v(" "),t("h4",{attrs:{id:"dependances-for-component-serverless-enable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependances-for-component-serverless-enable"}},[e._v("#")]),e._v(" dependances for component-serverless-enable")]),e._v(" "),t("p",[e._v("est dépendant de component-network")]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-serverless-enable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-serverless-enable"}},[e._v("#")]),e._v(" ownership for component-serverless-enable")]),e._v(" "),t("ul",[t("li",[e._v("team solution")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-serverless-enable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-serverless-enable"}},[e._v("#")]),e._v(" elements for component-serverless-enable")]),e._v(" "),t("ul",[t("li",[e._v("configuration d'api-gateway")]),e._v(" "),t("li",[e._v("lambda d'authentification")]),e._v(" "),t("li",[e._v("...")])]),e._v(" "),t("h3",{attrs:{id:"component-grafana-eks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#component-grafana-eks"}},[e._v("#")]),e._v(" component-grafana-eks")]),e._v(" "),t("p",[e._v("Ajout un grafana pour un namespace dans EKS")]),e._v(" "),t("h4",{attrs:{id:"dependances-for-component-grafana-eks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dependances-for-component-grafana-eks"}},[e._v("#")]),e._v(" dependances for component-grafana-eks")]),e._v(" "),t("ul",[t("li",[e._v("component-kubernetes")]),e._v(" "),t("li",[e._v("component-observability-apps")]),e._v(" "),t("li",[e._v("component du projet")])]),e._v(" "),t("h4",{attrs:{id:"ownership-for-component-grafana-eks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ownership-for-component-grafana-eks"}},[e._v("#")]),e._v(" ownership for component-grafana-eks")]),e._v(" "),t("ul",[t("li",[e._v("team solution")])]),e._v(" "),t("h4",{attrs:{id:"elements-for-component-grafana-eks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elements-for-component-grafana-eks"}},[e._v("#")]),e._v(" elements for component-grafana-eks")]),e._v(" "),t("ul",[t("li",[e._v("helm chart grafana\n"),t("ul",[t("li",[e._v("oauth pluggé sur Cognito (ou idp ops)")])])])]),e._v(" "),t("h3",{attrs:{id:"to-be-defined-component"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#to-be-defined-component"}},[e._v("#")]),e._v(" To be defined component")]),e._v(" "),t("p",[e._v("les composants à définir:")]),e._v(" "),t("ul",[t("li",[e._v("...")])]),e._v(" "),t("h2",{attrs:{id:"composants-applicatifs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#composants-applicatifs"}},[e._v("#")]),e._v(" Composants applicatifs")]),e._v(" "),t("p",[e._v("Un composant peut également être une application\ncf: https://www.12factor.net/fr/\ncf: https://blog.wescale.fr/2019/08/22/la-nouvelle-stack-du-developpeur-backend-cloud-native/")]),e._v(" "),t("h2",{attrs:{id:"other"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#other"}},[e._v("#")]),e._v(" Other")]),e._v(" "),t("p",[e._v("https://Ext2-R1-119")])])}),[],!1,null,null,null);n.default=s.exports}}]);